---
title: Physical lighting units
date: 2022/10/24
---

复习一下pbr中光照部分的物理理解

## 辐射度学的物理量

| name | unit | meaning |  |
| --- | --- | --- | --- |
| 辐射通量（辐射功率） radiant flux | 瓦特 watt(w) | 焦每秒 | scalar |
| 辐射度 radiosity | 瓦特/平方米 | 特指离开表面 | scalar |
| 辐照度 irradiance | 瓦特/平方米 | 特指到达表面 | scalar |
| 辐射强度 radiant intensity | 瓦特/球面度 |  | vector |
| 辐射率 radiance | 瓦特/球面度平方米 |  | vector |
| 光源能量利用率 luminous efficiency | / | 辐射通量 /光源输入功率 | ratio |

一个光源，假设是电灯，以一定输入功率运行，将电能转化为光能。从粒子的角度来说，就是大量的光子从灯泡离开。这些光子具有不同的频率，每个光子的能量是普朗克常数 * 频率，这些光子的运动方向和能量在空间中形成一个光场。

因为光会从各个方向离开光源，光源也是有面积的。所以光场是一个给定位置和方向下辐射强度的函数：辐射强度 = f(位置, 方向)。那么辐射强度如何定义？

首先, 在空间中设定某个边界，这里说的边界指这个空间中的某抽象二维表面（不在乎是否反射），则**每秒钟通过该边界的光子能量总和，即辐射通量**。

辐射通量的单位显然是瓦（焦/秒），电源的输入功率无法全部转化为光能，光源能量利用率即光源的辐射通量对输入功率的比值。

在光场中，某边界肯定是有具体面积的，所以这个边界的通量可以计算密度，单位是瓦/平米，即辐射度或辐照度，根据上下文一般分别指光离开或者到达边界的情况。考虑边界趋于微元的情况，即**辐射度是辐射通量在面空间上的密度**。

在光场中，任意点有任意方向的辐射，该点发射的辐射对任意某测量边界可形成一个辐射通量。该测量边界对该点存在一个立体角，辐射通量除以立体角，即每立体角的辐射通量为该点对该测量边界的辐射强度。当测量边界趋于微小面元时，我们可以认为测量的是该点到指向面元方向的辐射强度。单位是瓦/球面度。**辐射强度就是描述辐射通量在角度空间的密度**。

因为能量守恒，所以光子数量相同，即通量守恒。相同的立体角下，因为表面积根据距离的平方增加，所以辐射度（通量/平方米）按距离的平方衰减。从观测者的角度看，因为辐射度按平方关系减小的，观测点从光源方向接受到的通量也平方关系减小，所以观测点测量光源的辐射强度也按距离的平方衰减。

如果我们通过定义 **辐射强度的在垂直光源接受点的面密度** ，可以得到一个**距离无关**的量，即**辐射率**，单位是瓦/球面度平方米。

## 光度学的物理量

**光度学就是可见光范围内的辐射度学**，基本逻辑是一致的。在辐射度学中，我们的光子有任意的频率，但是人眼只能看到对一部分频率的光。所以辐射度学计算的通量，各种强度，无法和视觉现象（亮暗）所匹配。比如：可能计算出的辐射率很高，但是光子频率很高人眼不可见，所以很暗。

其中最重要之处是要建立两种测量之间的联系。

SI的基本物理量有7个，其他物理量都是这些基本物理量在量纲上的组合。这些基本物理量本质是基本的测量方式，其中，光强就是一个基本物理量。

从辐射度学的看，似乎光强并不是基本物理量，因为能量，光场，各种强度都是完善定义的。正因为人眼的因素，因为人无法线性的感知完整的辐射场，而测量是为感知而服务的，所以才会以人眼为基准定义一套新的物理量。

光强的基本单位是坎德拉，对于人眼来说，差不多是1烛光的强度感受。精确的定义是：

> 给定一个频率为540.0154×10^12Hz的单色辐射光源（黄绿色可见光），该辐射源在某个方向的辐射强度为1/683瓦每球面度，则该辐射源在该方向的发光强度为1坎德拉
> 

这个定义建立了 辐射强度 对 光强度的映射关系。

光度学就是可见光范围内的辐射度学，其中“可见”的定义是用过一个人眼实验得到 光度函数：

![525px-Luminosity.png](/images/physical-light-unit/525px-Luminosity.png)

（注：上图中其实有两个光度函数标准，分别是低亮度和高亮度的感受情况（具体可能用一个就可以？））

横轴是光的波长（即光速/频率），纵轴是可见性，这里被归一化到了1。由光强的定义可知，实际上进行换算时，不仅要对辐射场的光谱分布 和光度函数相乘再参与后续的能量通量积分计算，还要缩放1/683才能得到传统的1烛光的主观人眼感受。

光场的定义也需要考虑到整个光谱，所以是 光谱辐射强度 = f(位置, 方向，波长)，后续所有的定义都要考虑光谱，如变成 光谱辐射通量，光谱辐射率等。然后应用光度函数，再积分得到光度学下的物理计量。

| name | unit | meaning | 辐射度学等价量 |
| --- | --- | --- | --- |
| 光强度 luminous intensity | 坎德拉 candela(cd) | 给定一个频率为540.0154×10^12Hz的单辐射光源（黄绿色可见光），辐射源在某个方向的辐射强度为1/683瓦每球面度，则该辐射源在该方向的发光强度为1坎德拉 | 辐射强度 |
| 光通量 luminous flux | 流明 lumen(lm) | 1 坎德拉强度的光源在1球面度的总光能 | 辐射通量 |
| 照度 illuminance | 勒克斯 lux(lx) | 1 流明每平方米，每单位面积的光通量 | 辐射度、辐照度 |
| 亮度 luminous | 坎德拉 / 平方米： 尼特 nit | 一般语境下的亮暗 | 辐射率 |
| 发光效率 luminous efficacy | 流明/瓦特 | 光通量 / 辐射通量, 或者 光通量 / 光源输入功率 | 类似 光源能量利用率 |

其中，渲染的像素结果, 人眼的亮暗感知。一般对应的物理量是上表中的亮度。

光在场景中交互，被反射折射，其中描述表面行为的是bxdf，一般定义的输入是照度，输出是亮度。主要原因是实验仪器上不方便直接测量输入的亮度，（输出的亮度是好测的），但是输入的照度是好测的。所以bxdf的单位通常为球面度分之一。

bxdf 亮度和照度的转化问题（可能会纠结？）： 我们乘以将输入直接乘以1 球面度即可。你可以理解因为brdf就是这么定义的，w / solid angle * m^2的输入，现在需要 w/ m^2 那就直接乘1改掉量纲即可，brdf输出回来还是w / solid angle * m^2。这个单位差别没有关系。