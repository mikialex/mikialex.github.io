<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>Graph based shader source management in artgl | mikialex</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="目前绝大多数的webgl库都使用字符串替换，并使用预编译指令来控制shader行为。这种一般的基于字符串替换的方案存在以下缺陷：没有可组合性，只是复用代码，抽象能力弱代码包含大量不需要的实现，使用 #include #define 等做区分，调试和阅读困难， 开发效率低问题定位只依赖最后编译报错，排错效率低修改代码需要在浏览器运行所有依赖的shader，代码难维护这些缺陷导致的各自难受之处之前也深"><meta property="og:type" content="article"><meta property="og:title" content="Graph based shader source management in artgl"><meta property="og:url" content="http://mikialex.github.io/2019/07/16/graph-based-shadersource-management/index.html"><meta property="og:site_name" content="mikialex"><meta property="og:description" content="目前绝大多数的webgl库都使用字符串替换，并使用预编译指令来控制shader行为。这种一般的基于字符串替换的方案存在以下缺陷：没有可组合性，只是复用代码，抽象能力弱代码包含大量不需要的实现，使用 #include #define 等做区分，调试和阅读困难， 开发效率低问题定位只依赖最后编译报错，排错效率低修改代码需要在浏览器运行所有依赖的shader，代码难维护这些缺陷导致的各自难受之处之前也深"><meta property="og:locale" content="default"><meta property="og:updated_time" content="2020-08-23T07:00:50.628Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Graph based shader source management in artgl"><meta name="twitter:description" content="目前绝大多数的webgl库都使用字符串替换，并使用预编译指令来控制shader行为。这种一般的基于字符串替换的方案存在以下缺陷：没有可组合性，只是复用代码，抽象能力弱代码包含大量不需要的实现，使用 #include #define 等做区分，调试和阅读困难， 开发效率低问题定位只依赖最后编译报错，排错效率低修改代码需要在浏览器运行所有依赖的shader，代码难维护这些缺陷导致的各自难受之处之前也深"><link rel="icon" href="/favicon.png"><link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,700|Inconsolata|Oswald" rel="stylesheet"><link rel="stylesheet" href="/icomoon/style.css"><link rel="stylesheet" href="/style.css"></head><body><div class="site-wrapper is_post_page"><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><script>document.getElementById("loading-bar").style.width="20%"</script><header id="header" class="site-header clearfix"><a class="logo square clearfix" href="/"><span class="b">A</span> <span class="b">R</span> <span class="b">T</span> <span class="w">I</span> <span class="w">F</span> <span class="b">A</span> <span class="b">C</span> <span class="b">T</span> </a><a class="me square site-nav-switch clearfix"><span class="b"><span class="icon icon-menu"></span></span></a></header><script>document.getElementById("loading-bar").style.width="40%"</script><main id="main" class="clearfix"><article id="post-graph-based-shadersource-management" class="article white-box article-type-post" itemscope itemprop="blogPost"><header class="article-header"><h1 class="article-title" itemprop="name">Graph based shader source management in artgl</h1><div class="article-meta">Posted on <time class="article-time" datetime="2019-07-15T16:00:00.000Z" itemprop="datePublished">Jul 16, 2019</time></div></header><div class="article-entry" itemprop="articleBody"><p>目前绝大多数的webgl库都使用字符串替换，并使用预编译指令来控制shader行为。</p><p>这种一般的基于字符串替换的方案存在以下缺陷：</p><ul><li>没有可组合性，只是复用代码，抽象能力弱</li><li>代码包含大量不需要的实现，使用 #include #define 等做区分，调试和阅读困难， 开发效率低</li><li>问题定位只依赖最后编译报错，排错效率低</li><li>修改代码需要在浏览器运行所有依赖的shader，代码难维护</li></ul><p>这些缺陷导致的各自难受之处之前也深有体会, 所以在设计artgl的shader体系时，我一直想要解决这个问题：</p><p><strong>如何找到更好的方案来管理一个webgl框架内的shader代码？</strong></p><p><a href="https://github.com/glslify/glslify" target="_blank" rel="noopener">glslify</a> 可能是一个好的解决方案，但我个人并不是很喜欢这种方式： 在shader里写require, transform shader code。 这种方式是以shader code作为核心，而我希望以框架code为核心，这样做1是ts代码能做更多的事情，而shader只是字符串，即便使用了完整的shader parser，能做的事情还是比较有限，扩展起来也不方便。 最好是使用ts代码，框架的代码，对着色流程进行抽象，shader只是这种抽象的target。2是，glslify太重了，我还是倾向于暂时把事情看的简单一些。</p><p>正常我们写shader，大多数写的是一些function，然后组合起来，执行出结果。所以我设计的组合单元是、ShaderFunction： 比如下面这个shader function，pack float depth到 四通道 rgba中</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> depthPackFunction = <span class="keyword">new</span> ShaderFunction(&#123;</span><br><span class="line">  description: <span class="string">'pack depth to RGBA output'</span>,</span><br><span class="line">  source: <span class="string">`</span></span><br><span class="line"><span class="string">    vec4 depthPack(float frag_depth)&#123;</span></span><br><span class="line"><span class="string">      vec4 bitSh = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);</span></span><br><span class="line"><span class="string">      vec4 bitMsk = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);</span></span><br><span class="line"><span class="string">      vec4 enc = fract(frag_depth * bitSh);</span></span><br><span class="line"><span class="string">      enc -= enc.xxyz * bitMsk;</span></span><br><span class="line"><span class="string">      return enc;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ShaderFunction 只是描述这个shader的function，一个shader可能会调用多次shaderFunction进行计算，所以某个使用ShaderFunction的计算我们用 ShaderFunctionNode 来表示：ShaderFunction 事实上是 ShaderFunctionNode 的 factory。！</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> packedDepth = depthPackFunction.make()</span><br></pre></td></tr></table></figure><p>function的调用总归要传参吧：参数从哪里来呢？ 要么是来自shader外部，比如uniform，attribute，texture，对于片元着色器还有vary，要么来自其他function调用的结果。</p><p>我们先看外部的参数可以如何如何构造：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 这是一个引擎内置支持的全局uniform</span></span><br><span class="line"><span class="keyword">const</span> VPMatrix = innerUniform(InnerSupportUniform.VPMatrix)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这时一个用户自定义的shader uniform</span></span><br><span class="line"><span class="keyword">const</span> sampleCount = uniform(<span class="string">"u_sampleCount"</span>, GLDataType.float).default(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同理一个position attribute</span></span><br><span class="line"><span class="keyword">const</span> position = attribute(<span class="string">"position"</span>, GLDataType.floatVec3);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同理一个depth vary</span></span><br><span class="line"><span class="keyword">const</span> depth = vary(<span class="string">"depth"</span>, GLDataType.float);</span><br></pre></td></tr></table></figure><p>然后我们可以给 packedDepth 喂数据了</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">packedDepth = depthPackFunction.make().input(</span><br><span class="line">  vary(<span class="string">"depth"</span>, GLDataType.float)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>当然，链式调用，我们可以一个一个input， 栗子：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> worldPosition = MVPTransform.make()</span><br><span class="line">  .input(<span class="string">"VPMatrix"</span>, innerUniform(InnerSupportUniform.VPMatrix))</span><br><span class="line">  .input(<span class="string">"MMatrix"</span>, innerUniform(InnerSupportUniform.MMatrix))</span><br><span class="line">  .input(<span class="string">"position"</span>, attribute(<span class="string">"position"</span>, GLDataType.floatVec3))</span><br></pre></td></tr></table></figure><p>如果 ShaderFunctionNode 依赖其他 ShaderFunctionNode 的计算结果，这也是可以的：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 比如 先生成一个动态的2d平面上的随机数</span></span><br><span class="line"><span class="keyword">const</span> Random2D1 = rand2DT.make()</span><br><span class="line">  .input(<span class="string">"cood"</span>, vUV)</span><br><span class="line">  .input(<span class="string">"t"</span>, sampleCount)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 再拿它去搞出另一个维度的随机数</span></span><br><span class="line"><span class="keyword">const</span> Random2D2 = rand.make()</span><br><span class="line">.input(<span class="string">"n"</span>, Random2D1)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后在拿这两个随机数生成随机方向</span></span><br><span class="line"><span class="keyword">const</span> randDir = dir3D.make()</span><br><span class="line">  .input(<span class="string">"x"</span>, Random2D1)</span><br><span class="line">  .input(<span class="string">"y"</span>, Random2D2)</span><br></pre></td></tr></table></figure><p>通过这些node的连接，我们构造了一个graph，现在有了这个graph，我们要把shader搞出来。</p><p>OK， 我们再回过头来看shader，我们需要的是shader，webgl shader，两个着色器：</p><p>对于顶点着色器，总归有个 gl_Position ，或者 vary 这些。很简单，我们只要指定说：哪个node作为gl_Position，或者哪个node最为 叫什么名字的 vary就可以了。</p><p>对于顶点着色器，总归有个 gl_FragColor ，或者 mrt的输出 这些。很简单，我们只要指定说：哪个node作为 gl_FragColor ，mrt就先从简不考虑了，虽然挺对称的。</p><p>因为其实我们 vary 是构建顶点着色器指定的，所以前面vary也应该从整个graph get，api要改一下。</p><p>这是个画normal颜色的shader，应该好理解：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> graph = <span class="keyword">new</span> ShaderGraph();</span><br><span class="line"></span><br><span class="line">graph.reset()</span><br><span class="line">  .setVertexRoot(</span><br><span class="line">    MVPTransform.make()</span><br><span class="line">      .input(<span class="string">"VPMatrix"</span>, innerUniform(InnerSupportUniform.VPMatrix))</span><br><span class="line">      .input(<span class="string">"MMatrix"</span>, innerUniform(InnerSupportUniform.MMatrix))</span><br><span class="line">      .input(<span class="string">"position"</span>, attribute(</span><br><span class="line">        &#123; name: <span class="string">'position'</span>, <span class="keyword">type</span>: GLDataType.floatVec3, usage: AttributeUsage.position &#125;</span><br><span class="line">      ))</span><br><span class="line">  )</span><br><span class="line">  .setVary(<span class="string">"color"</span>, attribute(</span><br><span class="line">    &#123; name: <span class="string">'normal'</span>, <span class="keyword">type</span>: GLDataType.floatVec3, usage: AttributeUsage.normal &#125;</span><br><span class="line">  ))</span><br><span class="line">  .setFragmentRoot(</span><br><span class="line">    normalShading.make().input(<span class="string">"color"</span>, <span class="keyword">this</span>.graph.getVary(<span class="string">"color"</span>))</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><p>为了开发方便，很多小功能也被加入进来，比如你可以这么写：而不用自己包装function</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node1 = vec4(attribute(<span class="string">"position"</span>, GLDataType.floatVec3), constValue(<span class="number">1</span>))</span><br><span class="line"><span class="keyword">const</span> node2 = node1.swizzling(<span class="string">"zyx"</span>)</span><br></pre></td></tr></table></figure><p>这就是 artgl ShaderGraph API的核心接口啦，目前这么写，已经可以work了！</p><p>在通过这些接口构建graph的过程中，每一步都有运行时参数类型的检查。link错的地方很早就能发现，解决了： 「问题定位只依赖最后编译报错，排错效率低」 的问题</p><p>虽然不是静态的检查，至少可以保证只要function写的不错，能link就能运行。所以你可以直接把每个shader构建加在单测里，单测没挂shader就没挂，不用起浏览器环境。解决了： 「修改代码需要在浏览器运行所有依赖的shader，代码难维护」 的问题</p><p>在编译shader的过程中，linker只会收集使用到的function和input依赖，没有任何预处理指令干扰视线，所以不存在： 「代码包含大量不需要的实现，使用 #include #define 等做区分，调试和阅读困难， 开发效率低」 的问题</p><p>shader graph 每一个node其实就是一个有类型的数值节点，所以可组合性非常强。不同的node类型实现不同的功能，易于扩展，比字符串拼接水平高多了。graph更是提供了整个shader的抽象，解决了「没有可组合性，只是复用代码，抽象能力弱」的问题</p><p>框架内置提供了常用的function供用户使用，也可以从独立的package import，shader 代码也正式成为框架的可扩展实现之一。 基于这样的抽象，甚至能解决不同shader version 编译的问题，这个就不展开了//</p><p>基于动态link，使用这种api，构造一个shader，类似于使用react，构造一个view，其实是相似的，有很多想象空间。基本上是我认为是实现框架抽象shader代码的一个好的方向。当然目前的解法还有一些限制，一些问题还有待解决，一些特性还有待设计和支持，如果有反馈和建议欢迎在 <a href="https://github.com/mikialex/artgl" target="_blank" rel="noopener">https://github.com/mikialex/artgl</a> 反馈和交流。</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> TSSAOShading <span class="keyword">extends</span> Shading &#123;</span><br><span class="line">  update() &#123;</span><br><span class="line">    <span class="keyword">const</span> VPMatrix = innerUniform(InnerSupportUniform.VPMatrix);</span><br><span class="line">    <span class="keyword">const</span> sampleCount = uniform(<span class="string">"u_sampleCount"</span>, GLDataType.float).default(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> depthTex = texture(<span class="string">"depthResult"</span>);</span><br><span class="line">    <span class="keyword">this</span>.graph.reset()</span><br><span class="line">      .setVertexRoot(</span><br><span class="line">        vec4(attribute(</span><br><span class="line">        &#123; name: <span class="string">'position'</span>, <span class="keyword">type</span>: GLDataType.floatVec3, usage: AttributeUsage.position &#125;</span><br><span class="line">      ), constValue(<span class="number">1</span>)))</span><br><span class="line">      .setVary(<span class="string">"v_uv"</span>, attribute(</span><br><span class="line">        &#123; name: <span class="string">'uv'</span>, <span class="keyword">type</span>: GLDataType.floatVec2, usage: AttributeUsage.uv &#125;</span><br><span class="line">      ))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> vUV = <span class="keyword">this</span>.graph.getVary(<span class="string">"v_uv"</span>);</span><br><span class="line">    <span class="keyword">const</span> depth = unPackDepth.make().input(<span class="string">"enc"</span>, depthTex.fetch(vUV))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> worldPosition = getWorldPosition.make()</span><br><span class="line">      .input(<span class="string">"uv"</span>, vUV)</span><br><span class="line">      .input(<span class="string">"depth"</span>, depth)</span><br><span class="line">      .input(<span class="string">"VPMatrix"</span>, VPMatrix)</span><br><span class="line">      .input(<span class="string">"VPMatrixInverse"</span>, uniform(<span class="string">"VPMatrixInverse"</span>, GLDataType.Mat4).default(<span class="keyword">new</span> Matrix4()))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> Random2D1 = rand2DT.make()</span><br><span class="line">      .input(<span class="string">"cood"</span>, vUV)</span><br><span class="line">      .input(<span class="string">"t"</span>, sampleCount)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> Random2D2 = rand.make()</span><br><span class="line">    .input(<span class="string">"n"</span>, Random2D1)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> randDir = dir3D.make()</span><br><span class="line">      .input(<span class="string">"x"</span>, Random2D1)</span><br><span class="line">      .input(<span class="string">"y"</span>, Random2D2)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newPositionRand = newSamplePosition.make()</span><br><span class="line">      .input(<span class="string">"positionOld"</span>, worldPosition.swizzling(<span class="string">"xyz"</span>))</span><br><span class="line">      .input(<span class="string">"distance"</span>, uniform(<span class="string">"u_aoRadius"</span>, GLDataType.float).default(<span class="number">1</span>))</span><br><span class="line">      .input(<span class="string">"dir"</span>, randDir)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> newDepth = unPackDepth.make()</span><br><span class="line">      .input(<span class="string">"enc"</span>,</span><br><span class="line">        depthTex.fetch(</span><br><span class="line">          NDCxyToUV.make()</span><br><span class="line">            .input(</span><br><span class="line">              <span class="string">"ndc"</span>, NDCFromWorldPositionAndVPMatrix.make()</span><br><span class="line">                .input(</span><br><span class="line">                  <span class="string">"position"</span>, newPositionRand</span><br><span class="line">                ).input(</span><br><span class="line">                  <span class="string">"matrix"</span>, VPMatrix</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">      )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.graph.setFragmentRoot(</span><br><span class="line">      tssaoMix.make()</span><br><span class="line">        .input(<span class="string">"oldColor"</span>, texture(<span class="string">"AOAcc"</span>).fetch(vUV).swizzling(<span class="string">"xyz"</span>))</span><br><span class="line">        .input(<span class="string">"newColor"</span>,</span><br><span class="line">          sampleAO.make()</span><br><span class="line">            .input(<span class="string">"depth"</span>, depth)</span><br><span class="line">            .input(<span class="string">"newDepth"</span>, newDepth)</span><br><span class="line">        )</span><br><span class="line">        .input(<span class="string">"sampleCount"</span>, sampleCount)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="article-tags"></div></article><script>document.getElementById("loading-bar").style.width="60%"</script></main><footer id="footer" class="clearfix"><div>&copy; mikialex Theme by <a href="http://artifact.me/" target="_blank">Art Chen</a>.</div><div>Powered by <a href="https://hexo.io/" rel="external">Hexo</a>.</div></footer><script>document.getElementById("loading-bar").style.width="80%"</script><div class="overlay"></div></div><div class="site-sidebar"><div class="sidebar-switch clearfix" style="display:none"><a class="dark-btn active" data-toggle="toc"><span class="icon icon-list"></span> <span class="text">Index</span> </a><a class="dark-btn" data-toggle="bio"><span class="icon icon-person"></span> <span class="text">Bio</span></a></div><div class="site-toc" style="display:none"><div class="no-index">No Index</div></div><div class="site-bio show" style="display:block"><div class="about-me clearfix"><div class="avatar"><img src="/img/avatar.png"></div><div class="info"><a class="name dark-btn" href="/about">miki alex</a></div><div class="info"><span class="item desc"></span></div></div><div class="social clearfix"><a href="/atom.xml" class="feed" target="_blank" rel="external"><span class="icon icon-feed"></span> </a><a href="https://github.com/mikialex" class="github" target="_blank" rel="external"><span class="icon icon-github"></span></a></div></div><div class="shortcuts"><a href="#header" class="top window-nav dark-btn" id="go-top"><span class="icon icon-chevron-thin-up"></span> </a><a class="close dark-btn" id="sidebar-close"><span class="icon icon-close"></span> </a><a href="#footer" class="top window-nav dark-btn" id="go-bottom"><span class="icon icon-chevron-thin-down"></span></a></div></div><script type="text/javascript">var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="google",universalSearchConfig={};"google"===SEARCH_SERVICE?universalSearchConfig={searchService:SEARCH_SERVICE,apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/img/"}:"algolia"===SEARCH_SERVICE?universalSearchConfig={searchService:SEARCH_SERVICE,apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/img/"}:"azure"===SEARCH_SERVICE&&(universalSearchConfig={searchService:SEARCH_SERVICE,serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,apiKey:AZURE_QUERY_KEY,imagePath:"/img/"})</script><script src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script>window.jQuery||document.write('<script src="/js/jquery.js"><\/script>')</script><script src="/js/search.js"></script><script src="/js/app.js"></script><script>document.getElementById("loading-bar").style.width="100%"</script></body></html>